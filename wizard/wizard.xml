<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="add-module" name="roma-domain-users-wizard">

	<import file="${wizard.path}/base-wizard.xml" />

	<target name="add-module">
		<echo>Adding new 'Authorization' beans in applicationContext-core.xml -></echo>
		<xmltask source="${project.path}/${project.ioc-path}/applicationContext-core.xml" dest="${project.path}/${project.ioc-path}/applicationContext-core.xml" preservetype="true" expandEntityReferences="false">
			<remove path="/beans/bean[@id='AuthenticationAspect']" />
			<insert path="/beans/bean[last()]" position="after">
				<![CDATA[
				]]>
			</insert>
	</xmltask>

	<!-- COPY PERSISTENCE DESCRIPTOR -->
	<copy todir="${project.path}/${project.src}/${project.package-path}/domain/entity">
		<fileset dir=".">
			<include name="**/*.jdo" />
		</fileset>
	</copy>

	<!-- COPY I18N -->
	<copy todir="${project.path}/${project.src}/${project.package-path}/i18n">
		<fileset dir="i18n">
			<include name="*.properties" />
		</fileset>
		<filterset>
			<filter token="project.package-path" value="${project.package-path}" />
		</filterset>
	</copy>

	<!-- COPY IMAGES -->
	<copy todir="${project.path}/WebContent/static/themes/default/image/">
		<fileset dir="images">
			<include name="*" />
		</fileset>
	</copy>

</target>
</project>
